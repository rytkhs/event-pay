/**
 * セキュリティモジュール用型ガード関数
 * 型安全性を向上させるための型ガード関数を提供
 */

// ====================================================================
// 基本型ガード
// ====================================================================

/**
 * 値が文字列であることを確認
 */
export function isString(value: unknown): value is string {
  return typeof value === "string";
}

/**
 * 値が数値であることを確認
 */
export function isNumber(value: unknown): value is number {
  return typeof value === "number" && !isNaN(value);
}

/**
 * 値がオブジェクトであることを確認（nullを除く）
 */
export function isObject(value: unknown): value is Record<string, unknown> {
  return typeof value === "object" && value !== null && !Array.isArray(value);
}

// ====================================================================
// 日付・時間関連型ガード
// ====================================================================

// ====================================================================
// イベント関連型ガード
// ====================================================================

/**
 * 基本的なイベント情報の型ガード
 */
export interface EventInfo {
  id: string;
  status: string;
  date: string;
  registration_deadline?: string | null;
}

/**
 * イベント情報の型ガード
 */
export function isValidEventInfo(event: unknown): event is EventInfo {
  return (
    isObject(event) &&
    "id" in event &&
    "date" in event &&
    "status" in event &&
    isString(event.id) &&
    isString(event.date) &&
    isString(event.status) &&
    // registration_deadlineはオプショナル
    ("registration_deadline" in event
      ? event.registration_deadline === null || isString(event.registration_deadline)
      : true)
  );
}

// ====================================================================
// セキュリティ関連型ガード
// ====================================================================

// ====================================================================
// データベース関連型ガード
// ====================================================================

// ====================================================================
// 監査ログ関連型ガード
// ====================================================================

// ====================================================================
// エラーハンドリング関連型ガード
// ====================================================================

// ====================================================================
// ユーティリティ型ガード
// ====================================================================
