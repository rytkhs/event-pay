# ==============================================
# EventPay Environment Variables Template
# Copy this file to .env.local and fill in your actual values
# ==============================================

# ----------------------------------------------
# Core Application Settings
# ----------------------------------------------
# アプリケーションのベースURL (ローカル開発時は http://localhost:3000)
NEXT_PUBLIC_APP_URL=http://localhost:3000

# 本番環境のURL (デモ環境からのリダイレクト用)
NEXT_PUBLIC_PRODUCTION_URL=https://minnano-shukin.com

# メンテナンスモード設定 (trueで503を返却)
MAINTENANCE_MODE=false
# メンテナンスモード回避用トークン (?bypass=TOKEN)
MAINTENANCE_BYPASS_TOKEN=your-random-secret-token-min-32-chars

# ----------------------------------------------
# Supabase Configuration (Database & Auth)
# ----------------------------------------------
NEXT_PUBLIC_SUPABASE_URL=your-supabase-project-url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-supabase-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key

# ----------------------------------------------
# Stripe Configuration (Payment)
# ----------------------------------------------
# API Version & Keys
STRIPE_API_VERSION=2024-06-20
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_your-stripe-publishable-key
STRIPE_SECRET_KEY=sk_test_your-stripe-secret-key

# Webhook Secrets (Platform)
STRIPE_WEBHOOK_SECRET=whsec_your-webhook-secret
STRIPE_WEBHOOK_SECRET_TEST=whsec_your-test-webhook-secret

# Webhook Secrets (Connect)
STRIPE_CONNECT_WEBHOOK_SECRET=whsec_your-connect-webhook-secret
STRIPE_CONNECT_WEBHOOK_SECRET_TEST=whsec_your-test-connect-webhook-secret

# Webhook Security
# タイムスタンプ許容範囲(秒) - Connect Webhookもこの設定を使用します
STRIPE_WEBHOOK_TIMESTAMP_TOLERANCE=300

# Other Stripe Settings
# IP制限の有効化 (本番はtrue推奨, StripeのIP範囲外からのアクセスを拒否)
ENABLE_STRIPE_IP_CHECK=false
# 詳細ログ出力 (開発時のデバッグ用, trueでリクエスト/レスポンスの詳細ログを出力)
STRIPE_LOG_VERBOSE=false

# ----------------------------------------------
# Resend Configuration (Email)
# ----------------------------------------------
RESEND_API_KEY=re_your-resend-api-key
FROM_EMAIL=
FROM_NAME=
ADMIN_EMAIL=

# ----------------------------------------------
# Security & Rate Limiting (Upstash Redis)
# ----------------------------------------------
UPSTASH_REDIS_REST_URL="https://xxxx-xxxxx-xxxx-xxxxx.upstash.io"
UPSTASH_REDIS_REST_TOKEN="your-upstash-token"
# レート制限等のフィンガープリント用HMACシークレット (重要: 32文字以上でランダム生成してください)
# これがないとIPアドレスのハッシュ化が安全に行われません
RL_HMAC_SECRET=your-random-secret-min-32-chars

# ----------------------------------------------
# Job Queue (QStash & Cron)
# ----------------------------------------------
QSTASH_URL=
QSTASH_TOKEN=
QSTASH_CURRENT_SIGNING_KEY=
QSTASH_NEXT_SIGNING_KEY=

# Cronジョブ認証用シークレット (GitHub Actions等で使用)
CRON_SECRET=your-random-secret-min-32-chars

# ----------------------------------------------
# Analytics & Monitoring
# ----------------------------------------------
# Google Analytics 4
NEXT_PUBLIC_GA_MEASUREMENT_ID=G-XXXXXXXXXX
GA_API_SECRET=your-ga4-api-secret

# Sentry DSN
SENTRY_DSN=

# ----------------------------------------------
# Third Party Integrations
# ----------------------------------------------
# LINE Login
NEXT_PUBLIC_LINE_CHANNEL_ID=
LINE_CHANNEL_SECRET=

# Slack Notification (Optional: お問い合わせ通知用)
SLACK_CONTACT_WEBHOOK_URL=

# ----------------------------------------------
# Demo Environment
# ----------------------------------------------
# デモ環境かどうか (デモ環境であればtrue)
NEXT_PUBLIC_IS_DEMO=false
# デモ用データシーディングと紐づけるStripe ConnectアカウントID
DEMO_STRIPE_ACCOUNT_ID=
# デモ環境の公開URL
NEXT_PUBLIC_DEMO_URL=https://demo.minnano-shukin.com

# ----------------------------------------------
# Testing & Development
# ----------------------------------------------
# E2Eテスト実行時、QStashを経由せず同期的にWebhookを処理するか
SKIP_QSTASH_IN_TEST=
# プラットフォーム残高の最低維持額 (JPY)
PLATFORM_BALANCE_MIN_JPY=0
