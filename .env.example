# EventPay Environment Variables Template
# Copy this file to .env.local and fill in your actual values

# Supabase Configuration
NEXT_PUBLIC_SUPABASE_URL=your-supabase-project-url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-supabase-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key

# Stripe Configuration
STRIPE_API_VERSION=
STRIPE_SECRET_KEY=sk_test_your-stripe-secret-key
STRIPE_WEBHOOK_SECRET=whsec_your-webhook-secret
# Stripe Webhook Secret (Secondary) - for rotation/zero-downtime switch
STRIPE_WEBHOOK_SECRET_SECONDARY=
STRIPE_WEBHOOK_SECRET_TEST=whsec_your-test-webhook-secret
STRIPE_WEBHOOK_SECRET_TEST_SECONDARY=
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_your-stripe-publishable-key
# Stripe Webhook timestamp tolerance (seconds)
STRIPE_WEBHOOK_TIMESTAMP_TOLERANCE=300

# Stripe Connect Webhook
STRIPE_CONNECT_WEBHOOK_SECRET=whsec_your-connect-webhook-secret
# Stripe Connect Webhook Secret (Secondary) - for rotation/zero-downtime switch
STRIPE_CONNECT_WEBHOOK_SECRET_SECONDARY=
STRIPE_CONNECT_WEBHOOK_SECRET_TEST=whsec_your-test-connect-webhook-secret
STRIPE_CONNECT_WEBHOOK_SECRET_TEST_SECONDARY=
# Stripe Connect Webhook timestamp tolerance (seconds)
STRIPE_CONNECT_WEBHOOK_TIMESTAMP_TOLERANCE=300

# Webhook processing poll settings (milliseconds)
WEBHOOK_RESULT_POLL_MAX_MS=2000
WEBHOOK_RESULT_POLL_INTERVAL_MS=100

# Resend API Configuration
RESEND_API_KEY=re_your-resend-api-key
FROM_EMAIL=noreply@eventpay.jp
ADMIN_EMAIL=admin@eventpay.jp

# Application Configuration
NEXT_PUBLIC_APP_URL=http://localhost:3000
# Note: 手数料設定・最小送金額は fee_config テーブルで管理してください
NEXTAUTH_SECRET=your-nextauth-secret-min-32-chars
NEXTAUTH_URL=http://localhost:3000

# Security Configuration (Rate Limiting)
UPSTASH_REDIS_REST_URL="https://xxxx-xxxxx-xxxx-xxxxx.upstash.io"
UPSTASH_REDIS_REST_TOKEN="XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"

# Cron Authentication
# Use the same secret in your scheduler (Vercel/cron) as Bearer token or x-cron-secret header
CRON_SECRET=

# PayoutScheduler Configuration (Optional)
# Days after event end to trigger payout (default: 5)
PAYOUT_SCHEDULER_DAYS_AFTER_EVENT=5
# Note: 最小送金額は fee_config.min_payout_amount で管理されます
# Maximum events to process per run (default: 100)
PAYOUT_SCHEDULER_MAX_EVENTS_PER_RUN=100
# Maximum concurrent payout processing (default: 3)
PAYOUT_SCHEDULER_MAX_CONCURRENCY=3
# Delay between batches in milliseconds (default: 1000)
PAYOUT_SCHEDULER_DELAY_BETWEEN_BATCHES=1000
# Whether to retry failed payouts (default: false)
PAYOUT_SCHEDULER_RETRY_FAILED_PAYOUTS=false
# Whether to enable logging (default: true)
PAYOUT_SCHEDULER_ENABLE_LOGGING=true
# Log retention period in days (default: 30)
PAYOUT_SCHEDULER_LOG_RETENTION_DAYS=30

# MCP Configuration (Optional)
GITHUB_PERSONAL_ACCESS_TOKEN=your-github-token
POSTGRES_CONNECTION_STRING=postgresql://postgres:password@localhost:54322/postgres

PLATFORM_BALANCE_MIN_JPY=0

ENABLE_STRIPE_IP_CHECK=

STRIPE_LOG_VERBOSE=

QSTASH_URL=
QSTASH_TOKEN=
QSTASH_CURRENT_SIGNING_KEY=
QSTASH_NEXT_SIGNING_KEY=
