# EventPay Environment Variables Template
# Copy this file to .env.local and fill in your actual values

# Supabase Configuration
NEXT_PUBLIC_SUPABASE_URL=your-supabase-project-url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-supabase-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key

# Stripe Configuration
STRIPE_API_VERSION=
STRIPE_SECRET_KEY=sk_test_your-stripe-secret-key
STRIPE_WEBHOOK_SECRET=whsec_your-webhook-secret
# Stripe Webhook Secret (Secondary) - for rotation/zero-downtime switch
STRIPE_WEBHOOK_SECRET_SECONDARY=
STRIPE_WEBHOOK_SECRET_TEST=whsec_your-test-webhook-secret
STRIPE_WEBHOOK_SECRET_TEST_SECONDARY=
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_your-stripe-publishable-key
# Stripe Webhook timestamp tolerance (seconds)
STRIPE_WEBHOOK_TIMESTAMP_TOLERANCE=300

# Stripe Connect Webhook
STRIPE_CONNECT_WEBHOOK_SECRET=whsec_your-connect-webhook-secret
# Stripe Connect Webhook Secret (Secondary) - for rotation/zero-downtime switch
STRIPE_CONNECT_WEBHOOK_SECRET_SECONDARY=
STRIPE_CONNECT_WEBHOOK_SECRET_TEST=whsec_your-test-connect-webhook-secret
STRIPE_CONNECT_WEBHOOK_SECRET_TEST_SECONDARY=
# Stripe Connect Webhook timestamp tolerance (seconds)
STRIPE_CONNECT_WEBHOOK_TIMESTAMP_TOLERANCE=300

# Webhook processing poll settings (milliseconds)
WEBHOOK_RESULT_POLL_MAX_MS=2000
WEBHOOK_RESULT_POLL_INTERVAL_MS=100

# Resend API Configuration
RESEND_API_KEY=re_your-resend-api-key
FROM_EMAIL=noreply@eventpay.jp
ADMIN_EMAIL=admin@eventpay.jp

# Slack Notification (Optional)
# お問い合わせ通知用Webhook URL（設定した場合のみSlack通知が送信されます）
SLACK_CONTACT_WEBHOOK_URL=

# Application Configuration
NEXT_PUBLIC_APP_URL=http://localhost:3000
NEXTAUTH_URL=http://localhost:3000

# Security Configuration (Rate Limiting)
UPSTASH_REDIS_REST_URL="https://xxxx-xxxxx-xxxx-xxxxx.upstash.io"
UPSTASH_REDIS_REST_TOKEN="XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"
# HMAC secret for rate limiting and fingerprinting (required in production)
RL_HMAC_SECRET=your-random-secret-min-32-chars

# Cron Authentication
# Use the same secret in GitHub Actions as Bearer token
CRON_SECRET=your-random-secret-min-32-chars

# MCP Configuration (Optional)
GITHUB_PERSONAL_ACCESS_TOKEN=your-github-token
POSTGRES_CONNECTION_STRING=postgresql://postgres:password@localhost:54322/postgres

PLATFORM_BALANCE_MIN_JPY=0

ENABLE_STRIPE_IP_CHECK=

STRIPE_LOG_VERBOSE=

QSTASH_URL=
QSTASH_TOKEN=
QSTASH_CURRENT_SIGNING_KEY=
QSTASH_NEXT_SIGNING_KEY=

# E2E Testing Configuration
# Set to 'true' to process webhooks synchronously (skip QStash) in test environments
SKIP_QSTASH_IN_TEST=
